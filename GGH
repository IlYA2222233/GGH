-- ðŸ”¥ GGH FLIGHT CONTROL SYSTEM
-- ðŸ›¡ï¸ Anti-Grab â€¢ Anti-Kick â€¢ Player Control â€¢ GUI

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- ==================== Ð“Ð›ÐÐ’ÐÐ«Ð• ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ ====================
local MENU_KEY = Enum.KeyCode.K
local GUI_ENABLED = true

-- ==================== ÐŸÐ•Ð Ð•ÐœÐ•ÐÐÐ«Ð• ====================
local antiGrabActive = false
local antiKickActive = false
local selectedTarget = nil
local menuOpen = false
local gui = nil

-- ==================== Ð¡ÐžÐ—Ð”ÐÐÐ˜Ð• GUI ====================
local function createGUI()
    if gui then gui:Destroy() end
    
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "GGH_FlightControl"
    ScreenGui.Parent = game.CoreGui
    
    -- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ„Ñ€ÐµÐ¹Ð¼
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 400, 0, 450)
    MainFrame.Position = UDim2.new(0.5, -200, 0.5, -225)
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = ScreenGui
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    Title.Text = "ðŸ”¥ GGH FLIGHT CONTROL v2.0"
    Title.TextColor3 = Color3.fromRGB(255, 100, 100)
    Title.TextSize = 18
    Title.Font = Enum.Font.GothamBold
    Title.Parent = MainFrame
    
    -- Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÐ°
    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Size = UDim2.new(0, 40, 0, 40)
    CloseBtn.Position = UDim2.new(1, -40, 0, 0)
    CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    CloseBtn.Text = "X"
    CloseBtn.TextColor3 = Color3.white
    CloseBtn.TextSize = 18
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.Parent = MainFrame
    
    CloseBtn.MouseButton1Click:Connect(function()
        menuOpen = false
        ScreenGui:Destroy()
        gui = nil
    end)
    
    -- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
    local PlayerScroll = Instance.new("ScrollingFrame")
    PlayerScroll.Size = UDim2.new(0.9, 0, 0, 200)
    PlayerScroll.Position = UDim2.new(0.05, 0, 0, 50)
    PlayerScroll.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    PlayerScroll.BorderSizePixel = 0
    PlayerScroll.ScrollBarThickness = 5
    PlayerScroll.Parent = MainFrame
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
    local ControlFrame = Instance.new("Frame")
    ControlFrame.Size = UDim2.new(0.9, 0, 0, 180)
    ControlFrame.Position = UDim2.new(0.05, 0, 0, 260)
    ControlFrame.BackgroundTransparency = 1
    ControlFrame.Parent = MainFrame
    
    -- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸
    local function createControlButton(text, yPos, color, callback)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 35)
        btn.Position = UDim2.new(0, 0, 0, yPos)
        btn.BackgroundColor3 = color
        btn.TextColor3 = Color3.white
        btn.Text = text
        btn.TextSize = 14
        btn.Font = Enum.Font.Gotham
        btn.Parent = ControlFrame
        
        btn.MouseButton1Click:callback
        
        return btn
    end
    
    -- ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
    local function updatePlayerList()
        for _, child in pairs(PlayerScroll:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end
        
        local yPos = 5
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= player then
                local playerBtn = Instance.new("TextButton")
                playerBtn.Size = UDim2.new(0.95, 0, 0, 30)
                playerBtn.Position = UDim2.new(0.025, 0, 0, yPos)
                playerBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
                playerBtn.TextColor3 = Color3.white
                playerBtn.Text = plr.Name
                playerBtn.TextSize = 13
                playerBtn.Font = Enum.Font.Gotham
                playerBtn.Parent = PlayerScroll
                
                playerBtn.MouseButton1Click:Connect(function()
                    selectedTarget = plr
                    print("ðŸŽ¯ Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð° Ñ†ÐµÐ»ÑŒ: " .. plr.Name)
                    -- ÐŸÐ¾Ð´ÑÐ²ÐµÑ‚ÐºÐ° Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾
                    for _, btn in pairs(PlayerScroll:GetChildren()) do
                        if btn:IsA("TextButton") then
                            btn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
                        end
                    end
                    playerBtn.BackgroundColor3 = Color3.fromRGB(100, 50, 150)
                end)
                
                yPos = yPos + 35
            end
        end
        
        PlayerScroll.CanvasSize = UDim2.new(0, 0, 0, yPos + 5)
    end
    
    -- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
    local antiGrabBtn = createControlButton("", 0, Color3.fromRGB(60, 80, 120), function()
        antiGrabActive = not antiGrabActive
        antiGrabBtn.Text = antiGrabActive and "ðŸ›¡ï¸ ANTI-GRAB: ON" or "ðŸ›¡ï¸ ANTI-GRAB: OFF"
        antiGrabBtn.BackgroundColor3 = antiGrabActive and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(60, 80, 120)
        startAntiGrab()
    end)
    
    local antiKickBtn = createControlButton("", 40, Color3.fromRGB(80, 60, 120), function()
        antiKickActive = not antiKickActive
        antiKickBtn.Text = antiKickActive and "ðŸ›¡ï¸ ANTI-KICK: ON" or "ðŸ›¡ï¸ ANTI-KICK: OFF"
        antiKickBtn.BackgroundColor3 = antiKickActive and Color3.fromRGB(150, 50, 50) or Color3.fromRGB(80, 60, 120)
        startAntiKick()
    end)
    
    local kickBtn = createControlButton("ðŸ’¥ KICK SELECTED", 80, Color3.fromRGB(120, 60, 60), function()
        if selectedTarget then
            kickPlayer(selectedTarget)
        else
            print("âŒ ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð° Ñ†ÐµÐ»ÑŒ!")
        end
    end)
    
    local massKickBtn = createControlButton("â˜¢ï¸ KICK ALL PLAYERS", 120, Color3.fromRGB(150, 50, 50), function()
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= player then
                kickPlayer(plr)
                wait(0.1)
            end
        end
    end)
    
    -- Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð° ÐºÐ½Ð¾Ð¿Ð¾Ðº
    antiGrabBtn.Text = antiGrabActive and "ðŸ›¡ï¸ ANTI-GRAB: ON" or "ðŸ›¡ï¸ ANTI-GRAB: OFF"
    antiKickBtn.Text = antiKickActive and "ðŸ›¡ï¸ ANTI-KICK: ON" or "ðŸ›¡ï¸ ANTI-KICK: OFF"
    
    -- ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
    updatePlayerList()
    
    -- ÐÐ²Ñ‚Ð¾Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ°
    Players.PlayerAdded:Connect(updatePlayerList)
    Players.PlayerRemoving:Connect(updatePlayerList)
    
    gui = ScreenGui
    return ScreenGui
end

-- ==================== ÐÐÐ¢Ð˜-Ð“Ð ÐÐ‘ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ ====================
local function startAntiGrab()
    if not antiGrabActive then return end
    
    local heartbeat
    heartbeat = RunService.Heartbeat:Connect(function()
        if not antiGrabActive then
            heartbeat:Disconnect()
            return
        end
        
        local char = player.Character
        if not char then return end
        
        -- ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÑÐ¸Ð»
        for _, obj in pairs(char:GetDescendants()) do
            if obj:IsA("BodyVelocity") or obj:IsA("BodyPosition") or 
               obj:IsA("BodyAngularVelocity") or obj:IsA("BodyForce") then
                obj:Destroy()
            end
        end
        
        -- Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ
        local humanoid = char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.PlatformStand = false
            humanoid.AutoRotate = true
            
            -- ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¹
            for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
                track:Stop()
            end
        end
    end)
end

-- ==================== ÐÐÐ¢Ð˜-ÐšÐ˜Ðš Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ ====================
local function startAntiKick()
    if not antiKickActive then return end
    
    -- Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ñ‚ÐµÐ»ÐµÐ¿Ð¾Ñ€Ñ‚Ð°Ñ†Ð¸Ð¸ Ð² Ð½ÐµÐ±Ð¾/Ð±ÐµÐ·Ð´Ð½Ñƒ
    local char = player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        local lastValidPosition = root.Position
        
        RunService.Heartbeat:Connect(function()
            if not antiKickActive then return end
            
            -- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ñ‚ÐµÐ»ÐµÐ¿Ð¾Ñ€Ñ‚Ð°Ñ†Ð¸ÑŽ Ð² Ð½ÐµÐ±Ð¾
            if root.Position.Y > 10000 or root.Position.Y < -1000 then
                root.CFrame = CFrame.new(lastValidPosition)
                print("ðŸ›¡ï¸ Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÐºÐ¸ÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°!")
            else
                lastValidPosition = root.Position
            end
        end)
    end
end

-- ==================== Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ ÐšÐ˜ÐšÐ ====================
local function kickPlayer(target)
    if not target or not target.Character then return end
    
    local char = target.Character
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    -- ÐœÐµÑ‚Ð¾Ð´Ñ‹ ÐºÐ¸ÐºÐ°
    local methods = {
        function() -- ÐÐµÐ±Ð¾
            root.CFrame = CFrame.new(root.Position + Vector3.new(0, 10000, 0))
        end,
        function() -- Ð‘ÐµÐ·Ð´Ð½Ð°
            root.CFrame = CFrame.new(0, -10000, 0)
        end,
        function() -- Ð’Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ
            local bav = Instance.new("BodyAngularVelocity")
            bav.AngularVelocity = Vector3.new(0, 1000, 0)
            bav.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
            bav.Parent = root
            
            local bv = Instance.new("BodyVelocity")
            bv.Velocity = Vector3.new(0, 500, 0)
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.Parent = root
            
            game.Debris:AddItem(bav, 5)
            game.Debris:AddItem(bv, 5)
        end
    }
    
    -- Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ ÐºÐ¸ÐºÐ°
    local method = methods[math.random(1, #methods)]
    method()
    
    print("ðŸ’¥ ÐšÐ¸ÐºÐ½ÑƒÑ‚: " .. target.Name)
end

-- ==================== Ð£ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• Ð“Ð›ÐÐ’ÐÐ«Ðœ ÐœÐ•ÐÐ® ====================
UIS.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == MENU_KEY then
        menuOpen = not menuOpen
        
        if menuOpen then
            createGUI()
            print("ðŸ“± GGH Menu Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾ (K)")
        elseif gui then
            gui:Destroy()
            gui = nil
            print("ðŸ“± GGH Menu Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¾")
        end
    end
end)

-- ==================== ÐÐ’Ð¢Ðž-Ð—ÐÐ©Ð˜Ð¢Ð ÐŸÐ Ð˜ Ð’ÐžÐ—Ð ÐžÐ–Ð”Ð•ÐÐ˜Ð˜ ====================
player.CharacterAdded:Connect(function()
    wait(1)
    if antiGrabActive then
        startAntiGrab()
    end
    if antiKickActive then
        startAntiKick()
    end
end)

-- ==================== Ð˜ÐÐ˜Ð¦Ð˜ÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð¯ ====================
print("========================================")
print("ðŸ”¥ GGH FLIGHT CONTROL SYSTEM LOADED")
print("========================================")
print("ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ K Ð´Ð»Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð¼ÐµÐ½ÑŽ")
print("========================================")
